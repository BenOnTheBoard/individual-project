<!-- semi-transparent panel to give illusion of modal on tutorial -->
@if (tutorialStep != 0){
<div class="covering-panel"></div>
}

<alg-page-navbar #topNavbar [duringAnimation]="duringAnimation" [isCodeShowing]="isCodeShowing"
  [isInfoShowing]="isInfoShowing" [SRStable]="SRstable" (commandEmitter)="handleNavbarCommand($event)"
  (dialogOpenEmitter)="dialogOpen=$event;" (tutorialStepEmitter)="tutorialUpdate($event)">
</alg-page-navbar>

<!--- these are absolutely positioned-->
<sidebar #leftSidebar [(isCodeShowing)]="isCodeShowing" [(tutorialStep)]="tutorialStep"></sidebar>
<app-info-sidebar #rightSidebar [(isInfoShowing)]="isInfoShowing" [(tutorialStep)]="tutorialStep"></app-info-sidebar>

<div class="container-fluid main row">
  <!-- sidebar -->
  <div class="spacer col-md-3 px-0" [ngClass]="{'d-none': !isCodeShowing}"></div>

  <div class="grid-container-algorithm px-0" id="mainContent"
    style="background-color: white; height: 100%; display: grid; grid-template-rows: 0.39fr 3.4fr 0.8fr;"
    [ngClass]="{'col-md-6' : isCodeShowing && isInfoShowing, 'col-md-9' : isCodeShowing != isInfoShowing, 'col-md-12': !isCodeShowing && !isInfoShowing, 'moveContentToTop': tutorialStep == 3}">

    <agent-titles [(isCodeShowing)]="isCodeShowing"></agent-titles>

    <div class="mainContentPopover" (window:resize)="drawService.redrawCanvas()" id="parent" style="min-height: 400px;"
      data-toggle="popover" data-placement="left" title="Algorithm Display"
      data-content="This is where you can see the animation for the algorithm! Green lines mean there is a matching between 2 circles, and red lines mean there is a proposal currently being considered. If you want more information, click on the info button next to the tutorial button!"
      data-trigger="manual">
      <canvas #canvas id="myCanvas" style="min-height: 280px; width: 100%; height: 100%"></canvas>
    </div>

    <playback-controls></playback-controls>
  </div>
  <!-- info sidebar -->
  <div class="spacer col-md-3 px-0" [ngClass]="{'d-none': !isInfoShowing}"></div>
</div>